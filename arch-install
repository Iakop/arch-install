#!/bin/bash

###########################################################################
# Connect to the internet, and set the system clock
###########################################################################

# Using nc, the connection to the internet is checked
echo "Checking for internet access..."
dns=8.8.8.8
nc -z -w 30 $dns 53 > /dev/null 2>&1
connectioncheck=$?

if [ $connectioncheck -eq 0 ] 
then
	echo "Connected to the internet!"
else
	echo "There is no connection, please remedy and run script again."
	exit 1
fi

# Set the system clock
echo "Synchronizing the system clock..."
timedatectl set-ntp true
# Sleep 2 seconds to allow ntp service to start
sleep 2
timedatectl status

###########################################################################
# Check the boot type:
###########################################################################

# First list the directory with efivars, and check whether they exist:
# Redirect stdout and stderr to /dev/null
echo "Checking boot type..."
ls /sys/firmware/efi/efivars > /dev/null 2>&1
efivarscheck=$?

if [ $efivarscheck -eq 2 ] 
then
	echo "The system uses BIOS boot!"
elif [ $efivarscheck -eq 0 ]
then
	echo "The system uses UEFI boot!"
fi

